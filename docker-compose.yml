version: "3" #現在の最新バージョン
services: #作成するコンテナを定義する
  nginx: #Nginxコンテナのオプションを色々記述
    image: nginx:1.15 #Nginxコンテナのもとになるイメージをここで指定
    ports:
      - 80:80 #ホスト側の80番ポートとコンテナ側の80番ポートをつなげる。このオプションをつけていないとホストPCのブラウザからNginxコンテナにアクセスすることができない。
    volumes:
      - ./source:/usr/share/nginx/html
      - ./nginx/default.conf:/etc/nginx/conf.d/default.conf

  php-fpm:
    build: ./php-fpm #このコンテナの元になるDockerfileがおいてあるパスを指定
    volumes:
      - ./source:/var/www/html #PHP-FPMコンテナでもホストPC側のプログラムソースディレクトリをマウントしておきます
